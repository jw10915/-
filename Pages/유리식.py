import streamlit as st
import sympy as sp

# í˜ì´ì§€ ê¸°ë³¸ ì„¤ì •
st.set_page_config(page_title="ìœ ë¦¬ì‹ í•™ìŠµ ì•±", layout="centered")

st.title("ğŸ“˜ ìœ ë¦¬ì‹ì˜ ê°œë…ê³¼ ì—°ì‚° í•™ìŠµ")
st.write("---")

# 1ï¸âƒ£ ìœ ë¦¬ì‹ì˜ ê°œë…
st.header("1ï¸âƒ£ ìœ ë¦¬ì‹ì˜ ê°œë…")
st.markdown("""
- **ìœ ë¦¬ì‹**ì€ **ë‘ ë‹¤í•­ì‹ì˜ ë‚˜ëˆ—ì…ˆ**ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” ì‹ì„ ë§í•©ë‹ˆë‹¤.  
- ì¦‰, $$ \\frac{P(x)}{Q(x)} $$ ì˜ ê¼´ì´ë©°, ì—¬ê¸°ì„œ  
  - P(x): ë‹¤í•­ì‹ (ë¶„ì)  
  - Q(x): ë‹¤í•­ì‹ (ë¶„ëª¨, ë‹¨ Q(x) â‰  0)  
- ìœ ë¦¬ì‹ì€ ë‹¤í•­ì‹ì´ ì•„ë‹Œ **ë¶„ëª¨ì— ë¬¸ìê°€ ìˆëŠ” ì‹**ì„ í¬í•¨í•©ë‹ˆë‹¤.
""")

# ì˜ˆì‹œ
st.subheader("ğŸ§© ì˜ˆì‹œ")
examples = [
    "1) \\( \\frac{x}{x+1} \\)",
    "2) \\( \\frac{2x^2 + 3x - 1}{x - 2} \\)",
    "3) \\( \\frac{3}{x} \\)",
    "4) \\( \\frac{x^2 + 1}{x^2 - 4} \\)"
]
for ex in examples:
    st.latex(ex)

st.write("---")

# 2ï¸âƒ£ ìœ ë¦¬ì‹ì˜ ì—°ì‚°
st.header("2ï¸âƒ£ ìœ ë¦¬ì‹ì˜ ì—°ì‚°")

st.markdown("""
ìœ ë¦¬ì‹ì˜ ì—°ì‚°ì—ëŠ” **ë§ì…ˆ, ëº„ì…ˆ, ê³±ì…ˆ, ë‚˜ëˆ—ì…ˆ**ì´ ìˆìŠµë‹ˆë‹¤.  
ê° ì—°ì‚°ì˜ ê¸°ë³¸ ì›ë¦¬ë¥¼ ë¨¼ì € ì´í•´í•˜ê³ , ì˜ˆì‹œë¥¼ ê³„ì‚°í•´ ë´…ì‹œë‹¤.
""")

# ì—°ì‚° ì„ íƒ
operation = st.selectbox("ì—°ì‚°ì„ ì„ íƒí•˜ì„¸ìš”", ["ë§ì…ˆ", "ëº„ì…ˆ", "ê³±ì…ˆ", "ë‚˜ëˆ—ì…ˆ"])

# ê³µí†µ x ë³€ìˆ˜ ì„¤ì •
x = sp.Symbol('x')

if operation == "ë§ì…ˆ":
    st.subheader("â• ìœ ë¦¬ì‹ì˜ ë§ì…ˆ")
    st.markdown("""
    - ë¶„ëª¨ê°€ ê°™ì„ ë•Œ: ë¶„ìëŠ” ë”í•˜ê³  ë¶„ëª¨ëŠ” ê·¸ëŒ€ë¡œ ë‘”ë‹¤.  
      $$ \\frac{a}{b} + \\frac{c}{b} = \\frac{a + c}{b} $$
    - ë¶„ëª¨ê°€ ë‹¤ë¥¼ ë•Œ: ê³µí†µë¶„ëª¨ë¥¼ êµ¬í•´ì„œ ë¶„ìë¥¼ ë°”ê¾¼ ë’¤ ë”í•œë‹¤.  
      $$ \\frac{a}{b} + \\frac{c}{d} = \\frac{ad + bc}{bd} $$
    """)
    expr1 = (x + 1)/(x - 2)
    expr2 = (2*x)/(x + 3)
    st.latex(f"\\frac{{x+1}}{{x-2}} + \\frac{{2x}}{{x+3}}")
    st.write("ğŸ§® ê³„ì‚° ê²°ê³¼:")
    st.latex(sp.latex(sp.simplify(expr1 + expr2)))

elif operation == "ëº„ì…ˆ":
    st.subheader("â– ìœ ë¦¬ì‹ì˜ ëº„ì…ˆ")
    st.markdown("""
    - ë¶„ëª¨ê°€ ê°™ìœ¼ë©´ ë¶„ìë¼ë¦¬ ëº€ë‹¤.  
      $$ \\frac{a}{b} - \\frac{c}{b} = \\frac{a - c}{b} $$
    - ë¶„ëª¨ê°€ ë‹¤ë¥´ë©´ ê³µí†µë¶„ëª¨ë¥¼ ë§Œë“¤ì–´ ê³„ì‚°í•œë‹¤.  
      $$ \\frac{a}{b} - \\frac{c}{d} = \\frac{ad - bc}{bd} $$
    """)
    expr1 = (2*x)/(x+1)
    expr2 = (x-3)/(x-2)
    st.latex(f"\\frac{{2x}}{{x+1}} - \\frac{{x-3}}{{x-2}}")
    st.write("ğŸ§® ê³„ì‚° ê²°ê³¼:")
    st.latex(sp.latex(sp.simplify(expr1 - expr2)))

elif operation == "ê³±ì…ˆ":
    st.subheader("âœ–ï¸ ìœ ë¦¬ì‹ì˜ ê³±ì…ˆ")
    st.markdown("""
    - ë¶„ìë¼ë¦¬, ë¶„ëª¨ë¼ë¦¬ ê°ê° ê³±í•œë‹¤.  
      $$ \\frac{a}{b} \\times \\frac{c}{d} = \\frac{ac}{bd} $$
    - ë‹¨, ì•½ë¶„ì´ ê°€ëŠ¥í•œ ê²½ìš° ì•½ë¶„í•œë‹¤.
    """)
    expr1 = (x**2 - 1)/(x + 2)
    expr2 = (x + 2)/(x + 1)
    st.latex(f"\\frac{{x^2 - 1}}{{x + 2}} \\times \\frac{{x + 2}}{{x + 1}}")
    st.write("ğŸ§® ê³„ì‚° ê²°ê³¼:")
    st.latex(sp.latex(sp.simplify(expr1 * expr2)))

elif operation == "ë‚˜ëˆ—ì…ˆ":
    st.subheader("â— ìœ ë¦¬ì‹ì˜ ë‚˜ëˆ—ì…ˆ")
    st.markdown("""
    - ë‚˜ëˆ—ì…ˆì€ **ë‚˜ëˆ„ëŠ” ìœ ë¦¬ì‹ì„ ë’¤ì§‘ì–´ ê³±ì…ˆìœ¼ë¡œ ë°”ê¾¼ë‹¤.**  
      $$ \\frac{a}{b} \\div \\frac{c}{d} = \\frac{a}{b} \\times \\frac{d}{c} = \\frac{ad}{bc} $$
    """)
    expr1 = (x+3)/(x-1)
    expr2 = (x+1)/(x+2)
    st.latex(f"\\frac{{x+3}}{{x-1}} \\div \\frac{{x+1}}{{x+2}}")
    st.write("ğŸ§® ê³„ì‚° ê²°ê³¼:")
    st.latex(sp.latex(sp.simplify(expr1 / expr2)))

st.write("---")
st.success("ğŸ’¡ ìœ ë¦¬ì‹ì˜ ê³„ì‚°ì—ì„œëŠ” í•­ìƒ **ë¶„ëª¨ê°€ 0ì´ ë˜ëŠ” ê°’ì€ ì œì™¸**í•´ì•¼ í•œë‹¤ëŠ” ì ì„ ê¸°ì–µí•˜ì„¸ìš”!")
